# Gulp 4 + Webpack 4 Boilerplate

* Шаблон створений з метою покращення процесу верстки і написання скриптів у
середніх та великих проектах.

<h2 id="advantages"> Основні переваги: </h2>

- Live Reload в режимі розробки при внесенні змін в файли з розширенням .js, .scss, .html.
- Можливість вкладати файли html в один одного. Частини html, які вкладаються в основний html, можуть вкладати в себе й інші частини.
- JS оброблюється за допомогою Webpack, тому доступні всі переваги ES6+, транспіляція через Babel, а також зручний import/export модулів.
- Встроєнний препроцессор Sass.
- Доступний таск для гнучкої генерація міксинів сітки SmartGrid. SmartGrid - сітка, яка, на відміну від бутстраповської сітки, пишеться виключно в css (а точніше в sass/scss), тому на виході маємо чистий, незахламлений зайвими классами html і зрозумілий фінальний сss. Плюс в gulpfile можна прописати конфіг для генерації сітки відповідно під проект.
- Разом з import/export і другими фічами webpack і ES6 можна вільно використовувати jquery і плагіни для неї. **Варто звернути увагу, що синтаксис підключення багатьох jquery-плагінів трішки відрізняється від звичайного імпорту. Приклад підключення розміщений [в розділі FAQ](#faq)**
- Sourcemaps для scss файлів.
- Доступний таск стиснення картинок і генерації svg-спрайтів.
- Встроєнний лінтер - ESLint і Prettier для стандартизованого форматування js-файлів. **Конфіг ESLint - airbnb**

<h2 id="requirements"> Вимоги:  </h2>

- Node: >= v12.18.1
- gulp-cli встановленний глобально (`npm i gulp-cli -g`)

<h2 id="priciples"> Принципи роботи:  </h2>

- В даному шаблоні умовно для html, scss і буквально для js файлів є точки входу(entry points); Точки входу - це саме ті файли-бандли, які потраплять в кінцеву папку build.
- Точки входу для html файлів розміщені у верхньому рівні папки src - src/. Файли html, які можуть вкладатися в основні html файли лежать в src/partials.
- Точки входу для scss файлів розміщені у верхньому рівні папки sass - src/sass/. Щоб sass-компілятор випадково не згенерував непотрібну точку входу, на початку назви додавайте " _ " - _someStyles.scss.
- Точки входу для js файлів розміщені у верхньому рівні папки js - src/js/. <br/>
**Не потрібно редагувати gulpfile.js для додавання точок входу для js. Система сама згенерує відповідні точки входу, якщо файли створені по шляху, який вказаний вище**
- При імпорті інших js файлів аліас **"@"** вказує на папку src/js/.
- Для зручного імпорту кожна папка з js-файлами повинна мати файл index.js, який експортує весь вміст цієї папки. Відповідно потім дуже зручно імпортувати файли і це не перетворюється на пекло. Наприклад це буде виглядати так:
```
import { some1, some2, some3 } from "@/utils"
```
- При додавання статичних файлів (картинки, шрифти) бажано перезібрати проект.
- І якщо щось пішло не так, то краще знову ж таки спробувати перезібрати проект :)
- Browsersync відтворює сайт з папки build.

<h2 id="scripts"> Доступні скріпти:  </h2>

`npm start` чи `npm run start` чи `gulp`

Запуск проекту в режимі develompent.
Проект запуститься в дефолтному браузері по адресі: http://localhost:3000

`npm run build`

Збірка проекту в режимі production.

<h2 id="gulpTasks"> Доступні gulp-таски:  </h2>

`gulp html` - генерація html <br/>
`gulp css` - генерація css <br/>
`gulp js` - генерація js <br/>
`gulp clean` - очистка папки build <br/>
`gulp svg` генерація svg-спрайту <br/>
`gulp sg` - генерація сітки Smart Grid <br/>
`gulp img` - стистення картинок <br/>
`gulp watch` - запуск спостерігача галпа <br/>
`gulp build` - збірка проекту <br/>
`gulp reload` - перезавантаження проекту в браузері <br/>

<h2 id="faq"> FAQ:  </h2>

### Що таке Smart Grid і для чого потрібний ?

Smart Grid - це набір міксинів для створення layout-cітки, використовуючи виключно css (scss, less, stylus). Тобто на відміну від сітки Bootstrap не потрібно використовувати массу класів в html.
Разом з тим Smart Grid має в собі міксини для зручної генерація медізапитів. Наприклад звичайний медіазапит

```
@media screen and (max-width: 768px) {
  .block {
    // bla bla
  }
}

```
можна записати ось так:

```
@include bp_768-block {
  .block {
    // bla bla
  }
}

```

А в старому sass синтаксисі - взагалі ось так:

```
+bp_768-block
  .block 
    // bla bla

```

### Як редагувати та генерувати набір міксинів Smart Grid ?

Конфіг для генерації Smart Grid знаходиться в gulpfile.js в таску (функції) sg, в об'єкті settings. Найважливіші налаштування це:

- Вибір кількості колонок (columns)
- Розмір контейнера і його полей (container)
- Брейкпойнти. Власне брейкпойнти і дозволяють потім використовувати міксини на прикладі вищезгаданого "bp_768-block" (breakPoints)

**При найменуванні брейкпонтів важливо зберігати структуру bp_{ширина екрану}**

**ВАЖЛИВО: не редагуйте файл _smart-grid.scss напряму. Редагуйте спочатку конфіг а потім запускайте в консолі команду ```gulp sg```. Вона перезапише файл _smart-grid.scss**

### Як створювати сітку в scss, використовуючи Smart Grid ?

Для початку варто створити структуру в html. Наприклад:

```
<div class="row">
  <div class="col"></div>
  <div class="col"></div>
  <div class="col"></div>
</div>
````
Далі в scss:

```
.row {
  @include row-flex;
}

.col {
  @include col;
  @include size(4);
  @include size-bp_768(6);
}
```
- Міксин "row-flex" створює ряд, в якому будуть розміщуватися колонки. Система не вимагає створення спеціальних колонок-контейнерів, в яких буде розміщуватися контент, як це в робиться в Bootstrap. Замість .col може бути і відразу елемент з контентом.

**Міксин створює від'ємні маржини зправа і зліва, які необхідні, щоб розтягнути контент зліва і зправа контейнера. Тому якщо хочете додати верхній і нижній маржин до ..row краще це робити повним записом, аби не перебити стилі коротким записом**

```
margin-top: 100px;
margin-bottom: 100px;
```

- Міксин "col" додає до колонки маржини зліва та зрава. Маржини колонок об'єднуються в розмірі і уторюють так званий гаттер між колонками.
- Міксин "size" додає розмір колонки. Тобто скільки колонок займатиме елемент в .row на всіх екранах. У прикладі вказано 4 колонки. Міксин "size-bp_768(6)" - це розширена версія "size", але з брейкпойнтом, що означає, що .col на всіх екранах буде мати 4 колонки, але на ширині екрану 768 буде мати 6. Цей міксин будується так:

```
@include size-{назва міксину брейкпойнту}
```

### Як підключати jquery плагіни ?

Так як webpack'у доступна jquery глобально, то це означає, що можна спокійно імпортувати jquery-плагіни. Приклад імпорту jquery та плагінів. Не обов'язково імпортувати саме з папки node_modules.
```
import $ from 'jquery';

import 'node_modules/inputmask/dist/jquery.inputmask.min.js';
import 'node_modules/inputmask-multi/js/jquery.inputmask-multi.min.js';
```

### Яка структура файлів scss в проекті ?

- По-перше, файли без нижнього підкреслення - це точки входу для для scss файлів. Тобто з цих файлів і згенеруєтьс фінальний сss файл і матиме таку ж назву.
- Важливим, але не завжди обов'язковим файлом є sass/_common.scss. До нього підключаються файл змінних (_vars.scss), файл з підключенними шрифтами (_fonts.scss), scss-код різних бібліотек (_libs.scss), aнімацій(_animation.scss), утиліт (_utilities.scss) та міксинів з папки _mixins. Крім того, цьому файлі доданий reset стилів та додані базові, стартові стилі. Тому в точках входу цей файл бажано підключати зверху.
- Папка _blocks вміщує в собі набір окремих ізольованих блоків. **Тобто, щоб додавати і редагувати блоки згідно задуманій структурі потрібно використовувати методологію BEM, але можна використовувати й інший підхід. Проект в цьому плані гнучкий**. 

Все ж, якщо користуватися BEM'ом, то ізольовані блоки сортуються або за своїм місцезнаходженням або по категорії або за якимось іншим параметром. Наприклад, якщо блок є лише на сторінці Портфоліо і ніде більше не повторюється, то його можна записати таким чином:

1) Створити в папці _blocks папку _portfolio. 
2) В ній створити папку _portfolio-blocks і кореневий файл _portfolio.scss, який підключатиме в собі всі блоки з _portfolio-blocks і потім підключатиметься десь у якійсь точці входу.

Але можна використати і коротший варіант, особливо якщо блоків не багато

1) Створити в папці _blocks папку _portfolio. 
2) В ній створити файл _portfolio.scss і в ньому записувати всі блоки. І потім цей файл підключити до точки входу.

Якщо сортувати блоки за категорією, то можна зробити так. Наприклад, категорія попапів.
1) Створити в папці _blocks папку _popups. 
2) В ній створити файл _popups.scss і в ньому записувати всі варінта попапів (або кожен попап окреми файлом). І потім цей файл попапів (або кожен попап окремим файлом) підключити до точки входу.

- Важливою папкою в папці _blocks є папка _common. В ній зберігаються всі блоки, які знаходяться в більш ніж одній точці сайту. Це спільні блоки, про що говорить і назва. Їх опціонально можна підключати до точок входу.

### Як отримати зовнішній лінк на проект, по якому можна зайти через WI-FI?

Раніше плагін browsersync давав таку можливість, надаючи щось типу такого лінку при запуску

```
External: http://000.000.00.0:3000
```

Запустивши лінк на телефоні можна було отримати доступ до локального проекту і почати тестувати. Але зараз це працює некоректно і лінк не запустититься. Але якщо замість нього підставити IP адресу вашої WI-FI мережі, то все працюватиме:

Запустіть в консолі (windows):

```
ipconfig
```

Знайдіть активне підключення WI-FI, скопіюйте пункт IPv4 (зазвичай це IPv4) і вставте в адресу.
Адреса має виглядати так

```
http://{IPv4}:3000
```